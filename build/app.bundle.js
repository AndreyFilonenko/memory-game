!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n){i(this,e);var a=window.localStorage,s=void 0;this.getLocalStorage=function(){return s||JSON.parse(a.getItem(t)||"[]")},this.setLocalStorage=function(e){a.setItem(t,JSON.stringify(s=e))},n&&n()}return a(e,[{key:"getAllBySize",value:function(e){return this.getLocalStorage().filter(function(t){return t.size===e})}},{key:"insert",value:function(e,t){var n=this.getLocalStorage();n.push(e),this.setLocalStorage(n),t&&t()}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){i(this,e),this.skinPath=null,this.gameFieldSize=null,this.game=document.createElement("div"),this.game.id="mg",this.game.className="mg",this.gameStart=document.createElement("div"),this.gameStart.id="mg__menu",this.gameStart.className="mg__menu",this.gameAction=document.createElement("div"),this.gameAction.id="mg__game",this.gameAction.className="mg__game",this.gameWin=document.createElement("div"),this.gameWin.id="mg__win",this.gameWin.className="mg__win",this.gameScores=document.createElement("div"),this.gameScores.id="mg__scores",this.gameScores.className="mg__scores",this.container=document.querySelector("#appcontainer"),this.container.appendChild(this.game)}return a(e,[{key:"renderMenu",value:function(){this.clearGame(),this.gameStart.innerHTML='<div class="mg__menu-line--centered">            <h2 class="mg__menu-heading">Потренируйте свой мозг!</h2>            <p class="mg__menu-text">Это простая игра на память - необходимо запомнить положение карт и,            поочередно переворачивая их, собрать пары и очистить игровое поле.</p>            </div>            <div class="mg__menu-line--centered">            <div class="mg__menu-line-item">            <h3 class="mg__menu-sub-heading">Выберите размер поля:</h3>            <ul class="mg__menu-size-select">            <li><span data-size="16">Маленький (4 x 4)</span></li>            <li><span data-size="36">Средний (6 x 6)</span></li>            <li><span data-size="64">Большой (8 x 8)</span></li>            </ul>            </div>            <div class="mg__menu-line-item">            <h3 class="mg__menu-sub-heading">Выберите тему карт:</h3>            <ul class="mg__menu-skin-select">            <li><span data-path="flags">Флаги стран</span></li>            <li><span data-path="new-year">Новый год</span></li>            <li><span data-path="outdoors">Туризм</span></li>            <li><span data-path="pokemons">Покемоны</span></li>            <li><span data-path="sports">Спорт</span></li>            </ul>            </div>            </div>            <div class="mg__menu-line--centered">            <button id="mg__button--start" class="mg__button mg__button--action">Начать игру</button>            </div>            <div class="mg__menu-line--centered">            <button id="mg__button--scores" class="mg__button mg__button--info">Посмотреть рекорды</button>            </div>',this.game.appendChild(this.gameStart),this.setMenuEvents()}},{key:"setMenuEvents",value:function(){for(var e=this,t=document.querySelectorAll("ul.mg__menu-size-select span"),n=0;n<t.length;n++)!function(n){t[n].addEventListener("click",function(){for(var i=0;i<t.length;i++)t[i].classList.remove("selected");t[n].classList.add("selected"),e.gameFieldSize=t[n].getAttribute("data-size")})}(n);for(var i=document.querySelectorAll("ul.mg__menu-skin-select span"),n=0;n<i.length;n++)!function(t){i[t].addEventListener("click",function(){for(var n=0;n<i.length;n++)i[n].classList.remove("selected");i[t].classList.add("selected"),e.skinPath=i[t].getAttribute("data-path")})}(n)}},{key:"renderGame",value:function(){this.clearGame(),this.gameAction.innerHTML='<div class="mg__game-line--centered">            <div class="mg__game-line-item">            <span>Количество ходов:</span>            </div>            <div class="mg__game-line-item">            <span id="mg__game-clicks" class="mg__game-clicks">0</span>            </div>            <div class="mg__game-line-item">            <span>Прошло времени:</span>            </div>            <div class="mg__game-line-item">            <span id="mg__game-time" class="mg__game-time">0</span>            </div>            <div class="mg__game-line-item">            <button id="mg__button--suspend" class="mg__button mg__button--action">Пауза</button>            </div>            <div class="mg__game-line-item">            <button id="mg__button--reset" class="mg__button mg__button--cancel">В меню</button>            </div>            </div>',this.gameActionWrapper=document.createElement("div"),this.gameActionWrapper.className="mg__wrapper",this.gameActionContainer=document.createElement("div"),this.gameActionContainer.className="mg__contents mg__size-"+this.gameFieldSize;for(var e=this.skinPath,t=0;t<this.gameFieldSize;t++){var n=t+1;this.gameActionContainer.innerHTML+='<div class="mg__card mg__card-'+n+'">                <div class="mg__card--inner" data-id="'+n+'">                <span class="mg__card--outside"><img src="img/'+e+'/00.png"></span>                <span class="mg__card--inside"><img src=""></span>                </div>                </div>'}this.gameActionWrapper.appendChild(this.gameActionContainer),this.gameAction.appendChild(this.gameActionWrapper),this.game.appendChild(this.gameAction),this.setGameEvents()}},{key:"setGameEvents",value:function(){document.getElementById("mg__button--suspend").addEventListener("click",function(){})}},{key:"setValue",value:function(e,t){var n=document.getElementById("mg__game-"+e);null!==n.parentNode&&(n.innerHTML=t)}},{key:"renderWinScreen",value:function(e,t){this.skinPath=null,this.gameFieldSize=null,this.clearGame(),this.gameWin.innerHTML='<div class="mg__win-line--centered">            <h2 class="mg__win-heading">Поздравляем! Вы выиграли!</h2>            <p class="mg__win-text">Вы справились за '+e+" секунд. Ваш счет - "+t+'.</p>            </div>            <div class="mg__win-line--centered">            <h3 class="mg__win-sub-heading">Введите свое имя для внесения записи в рекорды:</h3>            </div>            <div class="mg__win-line--centered">            <input type="text" id="mg__win-input" class="mg__win-input">            <button id="mg__button--submit" class="mg__button mg__button--disabled">Внести</button>            </div>            <div class="mg__win-line--centered">            <button id="mg__button--reset" class="mg__button mg__button--cancel">В меню</button>            </div>',this.game.appendChild(this.gameWin),this.setWinScreenEvents()}},{key:"setWinScreenEvents",value:function(){var e=document.getElementById("mg__win-input"),t=document.getElementById("mg__button--submit");e.addEventListener("input",function(){null!=e.value&&""!=e.value?(t.classList.remove("mg__button--disabled"),t.classList.add("mg__button--action")):(t.classList.remove("mg__button--action"),t.classList.add("mg__button--disabled"))})}},{key:"renderScores",value:function(){this.clearGame(),this.gameScores.innerHTML='<div class="mg__scores-line--centered">            <h2 class="mg__scores-heading">Рекорды</h2>            </div>            <div class="mg__scores-line--centered">            <div class="mg__scores-line-item">            Размеры полей:            </div>            <div class="mg__scores-line-item">            <button id="mg__button--small" class="mg__button mg__button--action">Маленькое</button>            </div>            <div class="mg__scores-line-item">            <button id="mg__button--medium" class="mg__button mg__button--action">Среднее</button>            </div>            <div class="mg__scores-line-item">            <button id="mg__button--big" class="mg__button mg__button--action">Большое</button>            </div>            <div class="mg__scores-line-item">            <button id="mg__button--reset" class="mg__button mg__button--cancel">Назад в меню</button>            </div>            </div>            <div class="mg__scores-line--centered">            <div id="mg__scores-table" class="mg__scores-table">            <span>Выберите размер поля:</span>            </div>            </div>',this.game.appendChild(this.gameScores),this.setScoresEvents()}},{key:"setScoresEvents",value:function(){var e=this,t="<tr> <td>Имя1</td> <td>15.01.17 11:16</td> <td>100500</td> <td>100500</td></tr>                    <tr> <td>Имя2</td> <td>17.03.17 13:26</td> <td>200600</td> <td>200600</td></tr>                    <tr> <td>Имя3</td> <td>19.05.17 15:46</td> <td>300700</td> <td>300700</td></tr>";document.getElementById("mg__button--small").addEventListener("click",function(){e.renderScoreTableBySize(t)}),document.getElementById("mg__button--medium").addEventListener("click",function(){e.renderScoreTableBySize(t)}),document.getElementById("mg__button--big").addEventListener("click",function(){e.renderScoreTableBySize(t)})}},{key:"renderScoreTableBySize",value:function(e){document.getElementById("mg__scores-table").innerHTML="<table>                                <thead>                                <tr>                                <td>Имя</td>                                <td>Дата и время игры</td>                                <td>Длительность</td>                                <td>Счет</td>                                </thead>                                <tbody>"+e+"</tbody></table>"}},{key:"clearGame",value:function(){null!==this.gameStart.parentNode&&this.game.removeChild(this.gameStart),null!==this.gameAction.parentNode&&this.game.removeChild(this.gameAction),null!==this.gameWin.parentNode&&this.game.removeChild(this.gameWin),null!==this.gameScores.parentNode&&this.game.removeChild(this.gameScores)}},{key:"bindShowMenu",value:function(e){var t=this;document.getElementById("mg__button--reset").addEventListener("click",function(){t.renderGame(),e()})}},{key:"bindStartGame",value:function(e){var t=this;document.getElementById("mg__button--start").addEventListener("click",function(){null!=t.gameFieldSize&&null!=t.skinPath&&(t.renderGame(),e(t.gameFieldSize))})}},{key:"bindShowScores",value:function(e){var t=this;document.getElementById("mg__button--scores").addEventListener("click",function(){t.renderScores(),e()})}},{key:"bindSaveScore",value:function(e){var t=document.getElementById("mg__win-input");document.getElementById("mg__button--submit").addEventListener("click",function(){null!=t.value&&""!=t.value&&e(t.value)})}}]),e}();t.default=s},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var a=n(0),s=i(a),r=n(1),o=i(r),l=n(4),c=i(l),u=n(8),d=i(u);console.log(d.default.canvas);var m=new o.default,g=new s.default("pairs-memory-game"),h=new c.default(m,g);window.addEventListener("load",h.showMenu())},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(5),o=i(r),l=n(1),c=i(l),u=n(0),d=i(u),m=function(){function e(t,n){if(a(this,e),!(t instanceof c.default&&n instanceof d.default))throw new Error("Invalid GameController ctor args.");this.view=t,this.repo=n,this.game=null}return s(e,[{key:"showMenu",value:function(){this.game=null,this.view.renderMenu(),this.view.bindStartGame(this.startGame.bind(this)),this.view.bindShowScores(this.showScores.bind(this))}},{key:"startGame",value:function(e){this.game=new o.default(e),this.game.start(),this.view.bindShowMenu(this.showMenu.bind(this))}},{key:"showWinScreen",value:function(){var e=this.game.timer.getCurrentValue(),t=this.game.getScore();this.view.renderWinScreen(e,t),this.view.bindShowMenu(this.showMenu.bind(this)),this.view.bindSaveScore(this.saveScore.bind(this))}},{key:"saveScore",value:function(e){this.repo.insert({id:Date.now(),name:e,size:this.game.gameField.length,duration:this.game.timer.getCurrentValue(),score:this.game.getScore()}),this.showMenu()}},{key:"showScores",value:function(){this.view.bindShowMenu(this.showMenu.bind(this))}}]),e}();t.default=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(6),o=i(r),l=n(7),c=i(l),u=function(){function e(t){a(this,e),this.gameField=e.getNewGameField(t),this.timer=new c.default,this.clicks=0,this.startTimeoutId=null,this.isFirstClicked=!1,this.firstClicked=null}return s(e,[{key:"start",value:function(){this.flipAll(),this.startTimeoutId=setTimeout("",1e3*Math.sqrt(this.gameField.length)),this.flipAll(),this.timer.start()}},{key:"end",value:function(){this.timer.stop()}},{key:"flipAll",value:function(){for(var e=0;e<this.gameField.length;e++)this.gameField[e].flip()}},{key:"cardClickHandler",value:function(e){var t=this;this.clicks++,!1===this.isFirstClicked?(this.isFirstClicked=!0,this.firstClicked=e,this.gameField[e.cardPosition-1].flip()):(this.gameField[e.cardPosition-1].flip(),this.firstClicked.cardId===e.cardId?(this.gameField[e.cardPosition-1].found(),this.gameField[this.firstClicked.cardPosition-1].found()):setTimeout(function(){t.gameField[e.cardPosition-1].flip(),t.gameField[t.firstClicked.cardPosition-1].flip()},1e3),this.isFirstClicked)}},{key:"getScore",value:function(){return 1e3*this.gameField.length-10*this.clicks-Math.floor(10*this.timer.getCurrentValue()/1e3)}}],[{key:"getNewGameField",value:function(e){for(var t=new Array(e),n=0;n<t.length/2;n++)t[n]=new o.default(n+1),t[n+t.length/2]=new o.default(n+1);t=t.sort(function(){return Math.random()-.5});for(var i=0;i<t.length;++i)t[i].cardPosition=i+1;return t}}]),e}();t.default=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t){i(this,e),this.cardId=t,this.cardState="facedown",this.cardPosition=null}return a(e,[{key:"flip",value:function(){"facedown"==this.cardState?this.cardState="faceup":"faceup"==this.cardState&&(this.cardState="facedown")}},{key:"found",value:function(){this.cardState="found"}},{key:"compareTo",value:function(e){return this.cardId==e.cardId}},{key:"getCardIdByState",value:function(){return"facedown"==this.cardState?0:this.cardId}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){i(this,e),this.value=0,this.state="stopped",this.startTime=null}return a(e,[{key:"start",value:function(){"stopped"==this.state&&(this.state="started",this.startTime=Date.now())}},{key:"stop",value:function(){"started"==this.state&&(this.state="stopped",this.value+=Math.round((Date.now()-this.startTime)/1e3),this.startTime=null)}},{key:"getCurrentValue",value:function(){return"started"==this.state?this.value+Math.round((Date.now()-this.startTime)/1e3):this.value}}]),e}();t.default=s},function(e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmJ1bmRsZS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAuYnVuZGxlLmpzIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==