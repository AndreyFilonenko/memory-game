!function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n){i(this,e);var s=window.localStorage,a=void 0;this.getLocalStorage=function(){return a||JSON.parse(s.getItem(t)||"[]")},this.setLocalStorage=function(e){s.setItem(t,JSON.stringify(a=e))},n&&n()}return s(e,[{key:"getAllBySize",value:function(e){return this.getLocalStorage().filter(function(t){return t.size===e})}},{key:"insert",value:function(e,t){var n=this.getLocalStorage();n.push(e),this.setLocalStorage(n),t&&t()}}]),e}();t.default=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(13),r=function(){function e(){i(this,e),this.skinPath=null,this.gameFieldSize=null,this.game=document.createElement("div"),this.game.id="mg",this.game.className="mg",this.gameStart=document.createElement("div"),this.gameStart.id="mg__menu",this.gameStart.className="mg__menu",this.gameAction=document.createElement("div"),this.gameAction.id="mg__game",this.gameAction.className="mg__game",this.gameWin=document.createElement("div"),this.gameWin.id="mg__win",this.gameWin.className="mg__win",this.gameScores=document.createElement("div"),this.gameScores.id="mg__scores",this.gameScores.className="mg__scores",this.container=document.querySelector("#appcontainer"),this.container.appendChild(this.game)}return s(e,[{key:"renderMenu",value:function(){this.clearGame(),this.skinPath=null,this.gameFieldSize=null,this.gameStart.innerHTML='<div class="mg__menu-line--centered">            <h2 class="mg__menu-heading">Потренируйте свой мозг!</h2>            <p class="mg__menu-text">Это простая игра на память - необходимо запомнить положение карт и,            поочередно переворачивая их, собрать пары и очистить игровое поле.</p>            </div>            <div class="mg__menu-line--centered">            <div class="mg__menu-line-item">            <h3 class="mg__menu-sub-heading">Выберите размер поля:</h3>            <ul class="mg__menu-size-select">            <li><span data-size="16">Маленький (4 x 4)</span></li>            <li><span data-size="36">Средний (6 x 6)</span></li>            <li><span data-size="64">Большой (8 x 8)</span></li>            </ul>            </div>            <div class="mg__menu-line-item">            <h3 class="mg__menu-sub-heading">Выберите тему карт:</h3>            <ul class="mg__menu-skin-select">            <li><span data-path="flags">Флаги стран</span></li>            <li><span data-path="new-year">Новый год</span></li>            <li><span data-path="outdoors">Туризм</span></li>            <li><span data-path="pokemons">Покемоны</span></li>            <li><span data-path="sports">Спорт</span></li>            </ul>            </div>            </div>            <div class="mg__menu-line--centered">            <button id="mg__button--start" class="mg__button mg__button--disabled">Начать игру</button>            </div>            <div class="mg__menu-line--centered">            <button id="mg__button--scores" class="mg__button mg__button--info">Посмотреть рекорды</button>            </div>',this.game.appendChild(this.gameStart),this.setMenuEvents()}},{key:"setMenuEvents",value:function(){for(var e=this,t=document.querySelector("#mg__button--start"),n=document.querySelectorAll("ul.mg__menu-size-select span"),i=0;i<n.length;i++)!function(i){n[i].addEventListener("click",function(){for(var s=0;s<n.length;s++)n[s].classList.remove("selected");n[i].classList.add("selected"),e.gameFieldSize=n[i].getAttribute("data-size"),null!=e.skinPath&&(t.classList.remove("mg__button--disabled"),t.classList.add("mg__button--action"))})}(i);for(var s=document.querySelectorAll("ul.mg__menu-skin-select span"),i=0;i<s.length;i++)!function(n){s[n].addEventListener("click",function(){for(var i=0;i<s.length;i++)s[i].classList.remove("selected");s[n].classList.add("selected"),e.skinPath=s[n].getAttribute("data-path"),null!=e.gameFieldSize&&(t.classList.remove("mg__button--disabled"),t.classList.add("mg__button--action"))})}(i)}},{key:"renderGame",value:function(e){if(!e||e.length!=this.gameFieldSize)throw new Error("Invalid GameView renderGame args.");this.clearGame(),this.gameAction.innerHTML='<div class="mg__game-line--centered">            <div class="mg__game-line-item">            <span>Количество ходов:</span>            </div>            <div class="mg__game-line-item">            <span id="mg__game-clicks" class="mg__game-clicks">0</span>            </div>            <div class="mg__game-line-item">            <span>Прошло времени:</span>            </div>            <div class="mg__game-line-item">            <span id="mg__game-time" class="mg__game-time">0</span>            </div>            <div class="mg__game-line-item">            <button id="mg__button--suspend" class="mg__button mg__button--action">Пауза</button>            </div>            <div class="mg__game-line-item">            <button id="mg__button--reset" class="mg__button mg__button--cancel">В меню</button>            </div>            </div>',this.gameActionWrapper=document.createElement("div"),this.gameActionWrapper.className="mg__wrapper",this.gameActionContainer=document.createElement("div"),this.gameActionContainer.className="mg__contents mg__size-"+this.gameFieldSize,this.gameActionContainer.id="mg__contents";for(var t=this.skinPath,n=0;n<e.length;n++){var i=e[n].cardId;this.gameActionContainer.innerHTML+='<div class="mg__card mg__card-'+(n+1)+'">                <div class="mg__card--inner" data-id="'+i+'">                <span class="mg__card--outside"><img src="img/'+t+'/00.png"></span>                <span class="mg__card--inside"><img src="img/'+t+"/"+(i>=10?"":"0")+i+'.png"></span>                </div>                </div>'}this.gameActionWrapper.appendChild(this.gameActionContainer),this.gameAction.appendChild(this.gameActionWrapper),this.game.appendChild(this.gameAction),this.setGameEvents()}},{key:"flipAllCards",value:function(){for(var e=document.querySelectorAll(".mg__card--inner"),t=0;t<e.length;++t)e[t].classList.toggle("flipped")}},{key:"flipBack",value:function(e){var t=document.querySelector(".mg__card-"+e+" .mg__card--inner");null!==t.parentNode&&t.classList.remove("flipped")}},{key:"setGameEvents",value:function(){var e=this;document.querySelector("#mg__button--suspend").addEventListener("click",function(){e.setValue("clicks",15),e.setValue("time",55)})}},{key:"setValue",value:function(e,t){var n=document.querySelector("#mg__game-"+e);null!==n.parentNode&&(n.innerHTML=t)}},{key:"setSolved",value:function(e){var t=document.querySelector(".mg__card-"+e+" .mg__card--inner");null!==t.parentNode&&t.classList.add("solved")}},{key:"renderWinScreen",value:function(e,t){this.clearGame(),this.gameWin.innerHTML='<div class="mg__win-line--centered">            <h2 class="mg__win-heading">Поздравляем! Вы выиграли!</h2>            <p class="mg__win-text">Вы справились за '+e+" секунд. Ваш счет - "+t+'.</p>            </div>            <div class="mg__win-line--centered">            <h3 class="mg__win-sub-heading">Введите свое имя для внесения записи в рекорды:</h3>            </div>            <div class="mg__win-line--centered">            <input type="text" id="mg__win-input" class="mg__win-input">            <button id="mg__button--submit" class="mg__button mg__button--disabled">Внести</button>            </div>            <div class="mg__win-line--centered">            <button id="mg__button--reset" class="mg__button mg__button--cancel">В меню</button>            </div>',this.game.appendChild(this.gameWin),this.setWinScreenEvents()}},{key:"setWinScreenEvents",value:function(){var e=document.querySelector("#mg__win-input"),t=document.querySelector("#mg__button--submit");e.addEventListener("input",function(){null!=e.value&&""!=e.value?(t.classList.remove("mg__button--disabled"),t.classList.add("mg__button--action")):(t.classList.remove("mg__button--action"),t.classList.add("mg__button--disabled"))})}},{key:"renderScores",value:function(e,t){this.clearGame();var n="<table><thead><tr><td>Имя</td><td>Дата и время игры</td><td>Длительность</td>        <td>Счет</td></thead><tbody>";if(0!=t.length)for(var i=0;i<t.length;i++)n+="<tr><td>"+t[i].name+"</td>                    <td>"+(0,a.getFormattedDateTime)(t[i].id)+"</td>                    <td>"+(0,a.getFormattedTime)(t[i].duration)+"</td>                    <td>"+t[i].score+"</td></tr>";else n+='<tr><td class="wide" colspan="4">Нет результатов игр на поле размером '+e+".</td></tr>";n+="</tbody></table>",this.gameScores.innerHTML='<div class="mg__scores-line--centered">            <h2 class="mg__scores-heading">Рекорды</h2>            </div>            <div class="mg__scores-line--centered">            <div class="mg__scores-line-item">            Размеры полей:            </div>            <div class="mg__scores-line-item">            <button data-size="16" class="mg__button mg__button--action">Маленькое</button>            </div>            <div class="mg__scores-line-item">            <button data-size="36" class="mg__button mg__button--action">Среднее</button>            </div>            <div class="mg__scores-line-item">            <button data-size="64" class="mg__button mg__button--action">Большое</button>            </div>            <div class="mg__scores-line-item">            <button id="mg__button--reset" class="mg__button mg__button--cancel">Назад в меню</button>            </div>            </div>            <div class="mg__scores-line--centered">            <div id="mg__scores-table" class="mg__scores-table">'+n+"</div>            </div>",this.game.appendChild(this.gameScores);for(var s=document.getElementsByClassName("mg__button mg__button--action"),r=0;r<s.length;++r)s[r].getAttribute("data-size")==e&&s[r].classList.add("selected")}},{key:"clearGame",value:function(){null!==this.gameStart.parentNode&&this.game.removeChild(this.gameStart),null!==this.gameAction.parentNode&&this.game.removeChild(this.gameAction),null!==this.gameWin.parentNode&&this.game.removeChild(this.gameWin),null!==this.gameScores.parentNode&&this.game.removeChild(this.gameScores)}},{key:"bindShowMenu",value:function(e){document.querySelector("#mg__button--reset").addEventListener("click",function(){e()})}},{key:"bindStartGame",value:function(e){var t=this;document.querySelector("#mg__button--start").addEventListener("click",function(){null!=t.gameFieldSize&&null!=t.skinPath&&e(t.gameFieldSize)})}},{key:"bindCardClickHandler",value:function(e){for(var t=document.querySelectorAll(".mg__card--inner"),n=0;n<t.length;n++)!function(n){t[n].addEventListener("click",function(){console.log(t[n]),t[n].classList.contains("flipped")||t[n].classList.contains("solved")||(t[n].classList.add("flipped"),e(Number.parseInt(t[n].getAttribute("data-id"))))})}(n)}},{key:"bindShowScores",value:function(e){document.querySelector("#mg__button--scores").addEventListener("click",function(){e()})}},{key:"bindShowScoresBySize",value:function(e){for(var t=document.getElementsByClassName("mg__button mg__button--action"),n=0;n<t.length;n++)!function(n){t[n].addEventListener("click",function(){e(Number.parseInt(t[n].getAttribute("data-size")))})}(n)}},{key:"bindSaveScore",value:function(e){var t=document.querySelector("#mg__win-input");document.querySelector("#mg__button--submit").addEventListener("click",function(){null!=t.value&&""!=t.value&&e(t.value)})}}]),e}();t.default=r},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var s=n(0),a=i(s),r=n(1),l=i(r),o=n(4),c=i(o),u=n(8),d=i(u);console.log(d.default.container);var m=new l.default,h=new a.default("pairs-memory-game"),g=new c.default(m,h);g.setMaxField(64),window.addEventListener("load",g.showMenu())},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(5),l=i(r),o=n(1),c=i(o),u=n(0),d=i(u),m=function(){function e(t,n){if(s(this,e),!(t instanceof c.default&&n instanceof d.default))throw new Error("Invalid GameController ctor args.");this.view=t,this.repo=n,this.game=null,this.intervalId=null,this.firstClicked=null,this.maxFieldSize=16}return a(e,[{key:"setMaxField",value:function(e){this.maxFieldSize=e}},{key:"showMenu",value:function(){this.game=null,this.view.renderMenu(),this.view.bindStartGame(this.startGame.bind(this)),this.view.bindShowScores(this.showScores.bind(this))}},{key:"startGame",value:function(e){this.game=new l.default(e,this.maxFieldSize),this.game.start(),this.view.renderGame(this.game.gameField),this.view.bindShowMenu(this.showMenu.bind(this)),this.view.bindCardClickHandler(this.cardClickHandler.bind(this))}},{key:"cardClickHandler",value:function(e){switch(this.game.cardClickHandler(e)){case"first":this.firstClicked=e;break;case"second":this.view.flipBack(this.firstClicked),this.view.flipBack(e),this.firstClickedId=null;break;case"solved":this.view.setSolved(this.firstClicked),this.view.setSolved(e),this.firstClickedId=null;break;case"end":this.endGame()}this.refreshClicks()}},{key:"endGame",value:function(){this.game.end(),clearInterval(this.intervalId),this.intervalId=null,this.showWinScreen()}},{key:"refreshTime",value:function(){"run"==this.game.state&&this.view.setValue("time",this.game.timer.getCurrentValue())}},{key:"refreshClicks",value:function(){"run"==this.game.state&&this.view.setValue("clicks",this.game.clicks)}},{key:"showWinScreen",value:function(){var e=this.game.timer.getCurrentValue(),t=this.game.getScore();this.view.renderWinScreen(e,t),this.view.bindShowMenu(this.showMenu.bind(this)),this.view.bindSaveScore(this.saveScore.bind(this))}},{key:"saveScore",value:function(e){this.repo.insert({id:Date.now(),name:e,size:this.game.gameField.length,duration:this.game.timer.getCurrentValue(),score:this.game.getScore()}),this.showMenu()}},{key:"showScores",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=this.repo.getAllBySize(e);this.view.renderScores(e,t),this.view.bindShowMenu(this.showMenu.bind(this)),this.view.bindShowScoresBySize(this.showScores.bind(this))}}]),e}();t.default=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(6),l=i(r),o=n(7),c=i(o),u=n(13),d=function(){function e(t,n){s(this,e),this.gameField=e.getNewGameField(t,n),this.timer=new c.default,this.clicks=0,this.startTimeoutId=null,this.isFirstClicked=!1,this.firstClickedId=null,this.state="stop",this.unresolvedCount=t/2}return a(e,[{key:"start",value:function(){this.timer.start(),this.state="run"}},{key:"end",value:function(){this.timer.stop(),this.state="stop"}},{key:"cardClickHandler",value:function(e){this.clicks++;var t="";return!1===this.isFirstClicked?(this.isFirstClicked=!0,this.firstClickedId=this.gameField[e-1].cardId,t="first"):(this.firstClickedId===this.gameField[e-1].cardId?(t="solved",this.unresolvedCount--):t="second",this.isFirstClicked),this.unresolvedCount<=0&&(t="end"),t}},{key:"getScore",value:function(){return 1e3*this.gameField.length-10*this.clicks-Math.floor(10*this.timer.getCurrentValue()/1e3)}}],[{key:"getNewGameField",value:function(e,t){for(var n=new Array,i=0;i<t/2;++i)n.push(new l.default(i+1));n=(0,u.shuffle)(n);for(var s=new Array,a=0;a<e/2;++a)s.push(new l.default(a+1)),s.push(new l.default(a+1));s=(0,u.shuffle)(s);for(var r=0;r<s.length;++r)s[r].cardPosition=r+1;return s}}]),e}();t.default=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t){i(this,e),this.cardId=t,this.cardState="facedown",this.cardPosition=null};t.default=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e),this.value=0,this.state="stopped",this.startTime=null}return s(e,[{key:"start",value:function(){"stopped"==this.state&&(this.state="started",this.startTime=Date.now())}},{key:"stop",value:function(){"started"==this.state&&(this.state="stopped",this.value+=Math.round((Date.now()-this.startTime)/1e3),this.startTime=null)}},{key:"getCurrentValue",value:function(){return"started"==this.state?this.value+Math.round((Date.now()-this.startTime)/1e3):this.value}}]),e}();t.default=a},function(e,t){},,,,,function(e,t,n){"use strict";function i(e){var t=new Date(e),n=t.getDate();n<10&&(n="0"+n);var i=t.getMonth()+1;i<10&&(i="0"+i);var s=t.getFullYear();s<10&&(s="0"+s);var a=t.getHours();a<10&&(a="0"+a);var r=t.getMinutes();r<10&&(r="0"+r);var l=t.getSeconds();return l<10&&(l="0"+l),n+"."+i+"."+s+" - "+a+":"+r+":"+l}function s(e){return e<60?e+" сек.":e<3600?e/60+" мин. "+e%60+" сек.":e/3600+" час. "+e%3600/60+" мин."+e%3600%60+" сек."}function a(e){for(var t=e.length-1;t>0;--t){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedDateTime=i,t.getFormattedTime=s,t.shuffle=a}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmJ1bmRsZS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAuYnVuZGxlLmpzIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==